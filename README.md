# Unified News Feed (reboot)

–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã–π ¬´—Å –Ω—É–ª—è¬ª —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Å–±–æ—Ä–∫–∏ `docs/unified.json` –∏–∑ –≤–∞—à–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)

1) –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub (–ø—É—Å—Ç–æ–π).
2) –ó–∞–≥—Ä—É–∑–∏—Ç–µ **–≤—Å–µ —Ñ–∞–π–ª—ã** –∏–∑ —ç—Ç–æ–≥–æ –∞—Ä—Ö–∏–≤–∞ (–∫—Ä–æ–º–µ `.github`, —Å–º. –Ω–∏–∂–µ) –≤ –∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
3) –í–∫–ª—é—á–∏—Ç–µ GitHub Pages: **Settings ‚Üí Pages ‚Üí Source: Deploy from a branch ‚Üí Branch: `main` / `docs`** (–∏–ª–∏ —Ç–∞ –≤–µ—Ç–∫–∞, –∫—É–¥–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∏).
4) –†–∞–∑—Ä–µ—à–∏—Ç–µ Actions –∑–∞–ø–∏—Å—å: **Settings ‚Üí Actions ‚Üí General ‚Üí Workflow permissions ‚Üí Read and write permissions**.
5) –°–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é workflow (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å GitHub –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞–ø–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å —Ç–æ—á–∫–∏ –ø—Ä–∏ Upload Files):
   - –ù–∞–∂–º–∏—Ç–µ **Add file ‚Üí Create new file**.
   - –í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞: **.github/workflows/build.yml** (—Å —Ç–æ—á–∫–æ–π –≤ –Ω–∞—á–∞–ª–µ).
   - –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ —Ñ–∞–π–ª–∞ `__WORKFLOW_build.yml` –∏–∑ —ç—Ç–æ–≥–æ –∞—Ä—Ö–∏–≤–∞.
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Commit).
6) –ó–∞–ø—É—Å—Ç–∏—Ç–µ workflow: **Actions ‚Üí Build unified feed ‚Üí Run workflow**.
7) –ì–æ—Ç–æ–≤—ã–π —Ñ–∏–¥ –±—É–¥–µ—Ç –ª–µ–∂–∞—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É: `https://<–≤–∞—à_–ª–æ–≥–∏–Ω>.github.io/<repo>/unified.json`.
   –ò–Ω–¥–µ–∫—Å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: `https://<–≤–∞—à_–ª–æ–≥–∏–Ω>.github.io/<repo>/`.

> –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫: Python 3.11+ ‚Üí `pip install -r requirements.txt` ‚Üí `python -m newsfeed.build`.

## –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏

- `src/newsfeed/build.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏.
- `src/newsfeed/fetch.py` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã, —Ä–µ—Ç—Ä–∞–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏).
- `src/newsfeed/dateparse_ru.py` ‚Äî —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –¥–∞—Ç (RU).
- `src/newsfeed/sources/*.py` ‚Äî –∞–¥–∞–ø—Ç–µ—Ä—ã –ø–æ —Å–∞–π—Ç–∞–º.
- `docs/` ‚Äî —Å—é–¥–∞ –ø–∏—à–µ—Ç—Å—è `unified.json` –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è GitHub Pages.
- `__WORKFLOW_build.yml` ‚Äî —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è `.github/workflows/build.yml` (—Å–æ–∑–¥–∞—ë—Ç–µ –≤—Ä—É—á–Ω—É—é).

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π

- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ù–ï-–∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏/–ª–µ–Ω—Ç—ã –≤–∏–¥–∞ `/news/section/`) –¥–ª—è **stroygaz.ru**, **government.ru**, **metalinfo.ru** –∏ –¥—Ä.
- –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –¥–∞—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è **metalinfo.ru**, **notim.ru**, **gostinfo.ru**, **minfin.gov.ru**, **eec.eaeunion.org**, **erzrf.ru** (–∏—Å–∫–∞–ª–∏ –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º).
- –ì–∏–±–∫–∏–π rate-limit –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ **429 Too Many Requests** (—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞ + –¥–∂–∏—Ç—Ç–µ—Ä).
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ **RSS/XML** (–±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π XMLParsedAsHTMLWarning).
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω, –µ—Å–ª–∏ —Å–∞–π—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω/—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é/–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403/401.
- Fallback ¬´—Ä—É—á–Ω–∞—è –æ—á–µ—Ä–µ–¥—å¬ª (`manual/queue.csv`) ‚Äî –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –≤—Ä—É—á–Ω—É—é (—Å–∫—Ä–∏–ø—Ç —Å–∞–º –ø–æ–¥—Ç—è–Ω–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ).

## –ë–ª–æ–∫–∏—Ä—É–µ–º—ã–µ/–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- **–ú–∏–Ω—Å—Ç—Ä–æ–π –†–æ—Å—Å–∏–∏** (`minstroyrf.gov.ru/press/?d=all`) ‚Äî —á–∞—Å—Ç–æ –æ—Ç–¥–∞—ë—Ç `401`/`403`. –í –∞–¥–∞–ø—Ç–µ—Ä–µ –≤–∫–ª—é—á–µ–Ω–∞ ¬´–º—è–≥–∫–∞—è¬ª —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (–ø–æ–¥–º–µ–Ω–∞ User-Agent, —Ä–µ—Ñ–µ—Ä–µ—Ä, –ø–∞—É–∑—ã). –ï—Å–ª–∏ –Ω–µ –ø—Ä–æ–π–¥—ë—Ç, –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.
- **–ì–ª–∞–≤–≥–æ—Å—ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞** (`gge.ru/press-center/news/`) ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ `403`. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ.
- **–†–ò–ê-–°–¢–ö** ‚Äî –∏–Ω–æ–≥–¥–∞ —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ —Å—Ä–µ–¥—ã GitHub. –ú–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä—É—á–Ω–æ–π –æ—á–µ—Ä–µ–¥—å—é –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º.
- **–ê–ù–¶–ë** ‚Äî –±—ã–ª–∏ —Ç–∞–π–º–∞—É—Ç—ã; –ø—Ä–æ–±—É–µ–º HTTPS –∏ —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç.

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–µ–π—Å—É —Å–º. –≤ –∫–æ–Ω—Ü–µ `src/newsfeed/sources/_common.py` –∏ –≤ –ª–æ–≥–∞—Ö Actions.

–£–¥–∞—á–∏! üß°
